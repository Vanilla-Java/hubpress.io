<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>High throughput Consensus</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://vanilla-java.github.io/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic|Open+Sans:400italic,700italic,700,400">
    <link rel="stylesheet" type="text/css" href="//vanilla-java.github.io/themes/roon/assets/css/screen.css?v=1536077091986" />

    <link rel="canonical" href="https://vanilla-java.github.io/2018/04/25/High-throughput-Consensus.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Vanilla Java" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="High throughput Consensus" />
    <meta property="og:description" content="When achieving consensus across a distributed network, the latency of that network is an important constraint. How can we increase throughput? How does Little&amp;#8217;s law help? Time to consensus To achieve consensus, each node on a network needs to send information to each other.  Depending on your consensus" />
    <meta property="og:url" content="https://vanilla-java.github.io/2018/04/25/High-throughput-Consensus.html" />
    <meta property="article:published_time" content="2018-04-25T00:00:00.000Z" />
    <meta property="article:tag" content="Blockchain" />
    <meta property="article:tag" content="Consensus" />
    <meta property="article:tag" content="Latency" />
    <meta property="article:tag" content="Throughput" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="High throughput Consensus" />
    <meta name="twitter:description" content="When achieving consensus across a distributed network, the latency of that network is an important constraint. How can we increase throughput? How does Little&amp;#8217;s law help? Time to consensus To achieve consensus, each node on a network needs to send information to each other.  Depending on your consensus" />
    <meta name="twitter:url" content="https://vanilla-java.github.io/2018/04/25/High-throughput-Consensus.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Vanilla Java",
    "author": {
        "@type": "Person",
        "name": "Peter Lawrey",
        "image": "https://avatars0.githubusercontent.com/u/1070321?v=4",
        "url": "https://vanilla-java.github.io/author/peter-lawrey/",
        "sameAs": "http://vanillajava.blogspot.com/",
        "description": "Most answers for Java and JVM on StackOverflow.com (~13K), &quot;Vanilla Java&quot; blog with four million views, founder of the Performance JUG,  Java Champion"
    },
    "headline": "High throughput Consensus",
    "url": "https://vanilla-java.github.io/2018/04/25/High-throughput-Consensus.html",
    "datePublished": "2018-04-25T00:00:00.000Z",
    "keywords": "Blockchain, Consensus, Latency, Throughput",
    "description": "When achieving consensus across a distributed network, the latency of that network is an important constraint. How can we increase throughput? How does Little&amp;#8217;s law help? Time to consensus To achieve consensus, each node on a network needs to send information to each other.  Depending on your consensus"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Vanilla Java" href="https://vanilla-java.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/themes/prism-okaidia.min.css">
    
        <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>
<body class="post-template tag-Blockchain tag-Consensus tag-Latency tag-Throughput  noimage">

    


    <article role="main" class="">
        <header>
            <a href="https://vanilla-java.github.io" id="home_link">«</a>
            <div class="meta"><time datetime="2018-04-25"><a href="/">April 25, 2018</a></time> <span class="count" id="js-reading-time"></span></div>
            <h1>High throughput Consensus</h1>
        </header>

        <div class="text" id="js-post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When achieving consensus across a distributed network, the latency of that network is an important constraint. How can we increase throughput? How does Little&#8217;s law help?</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_time_to_consensus">Time to consensus</h3>
<div class="paragraph">
<p>To achieve <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)">consensus</a>, each node on a network needs to send information to each other.  Depending on your consensus model, it may have to send multiple series of messages to achieve consensus.</p>
</div>
<div class="sect3">
<h4 id="_minimum_latency">Minimum latency</h4>
<div class="paragraph">
<p>In latency sensitive trading systems, you send every message <a href="https://en.wikipedia.org/wiki/Message_queue#Synchronous_vs._asynchronous">asynchronously</a> and wait for acknowledgments as little as possible. The goal is to minimise the cost of recovery after a failure, with the expectation some data will be lost, no guarantee each node see messages in the same order (each producers messages should be ordered)</p>
</div>
<div class="paragraph">
<p>A constraint on the time to get a copy of the data is the network <a href="https://en.wikipedia.org/wiki/Latency_(engineering)">latency</a> one way, or half the round trip time (link). The delay is apparent only to systems receiving a copy of the data rather than the system producing the data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_sequencer">Using  sequencer</h4>
<div class="paragraph">
<p>If you need to have total ordering between nodes, a "sequencer" can be added.  This centralised service listens for messages and broadcasts the order it has chosen for the messages.  Typically this is the order it sees them, but it could order them in any manner.  This node has a key/trusted role and the impact of going down is significant.  Provided the sequencer is simple and on reliable hardware, the likelihood of failure can be minimised.</p>
</div>
<div class="paragraph">
<p>Using a sequencer adds latency to all message processing, even messages processed on the same node as the producer as the sequencer needs to order the messages before they are processed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_decentralised_consensus">Decentralised consensus</h4>
<div class="paragraph">
<p>What if you don’t have one trusted, centralised sequencer? What if you need to protect against <a href="https://en.wikipedia.org/wiki/Byzantine_fault_tolerance">Byzantine Failures</a>?</p>
</div>
<div class="paragraph">
<p>In this situation, each of the nodes need to play a role and achieving consensus where trust is in the super majority rather than any individual node.</p>
</div>
<div class="paragraph">
<p>This is more complicated and requires multiple rounds of messages to achieve agreement, however it handles random failure best as it assumes from the start that nodes are actively trying to disrupt the system.</p>
</div>
<div class="paragraph">
<p>In the case of <a href="http://www.chronicle-accelerate.com/">Chronicle Accelerate</a>, it has 4 phases to achieve consensus, meaning the time to consensus is a minimum of 4x the networks latency. In the design we assume the minimum round time is 5x the round trip time to include transmission and processing delays.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Round time depending on network latency</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Latency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round time (5x)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.2 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple servers in the same data centre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple data centres close together</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Within a modest sized city</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Across a large city</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Across cities in the same country</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Europe to North Amercia</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Across continents with slower links</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">600 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000 ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">World wide, hetrogenous network</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
600 ms is twice as long as quality network between London and Japan. This is likely to be an up limit on the sort of network which might be used.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_little_s_law_and_achieving_high_throughputs">Little’s law and achieving high throughputs</h4>
<div class="paragraph">
<p>A common technique for increasing the throughput when latency is a concern, is to increase the batch (or block) size. To paraphrase Little’s law:</p>
</div>
<div class="paragraph">
<p>Average number of messages = processing throughput * average time to process</p>
</div>
<div class="paragraph">
<p>This determines how large the block size needs to achieve a desire throughput for a given latency.</p>
</div>
<table class="tableblock frame-topbot grid-all" style="width: 60%;">
<caption class="title">Table 2. Batch size needed to achieve a given throughput</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Consensus Latency</th>
<th class="tableblock halign-right valign-top">100/s</th>
<th class="tableblock halign-right valign-top">1 K/s</th>
<th class="tableblock halign-right valign-top">10 K/s</th>
<th class="tableblock halign-right valign-top">100 K/s</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3000 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">300 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">3K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">30K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">300K txn</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">10 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">10 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">100 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1K txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">30 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">3 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">30 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">300 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">3K txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">100 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">10 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">100 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">10K txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">300 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">30 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">300 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">3K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">30K txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1000 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">100 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">10K txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">100K txn</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>IMHO, I feel more comfortable with batch size of 1 to 1000 as larger sizes have proven to be cumbersome in the past.</p>
</div>
<div class="paragraph">
<p>This all assumes that in each round, only one block is added, as most blockchain solutions do this.  In Accelerate’s case, each node can add one block in a round significantly reducing the size each block needs to be. (You could consider the collection of blocks produced across each node to be one batch making the difference somewhat semantic.)</p>
</div>
<table class="tableblock frame-topbot grid-all" style="width: 60%;">
<caption class="title">Table 3. Batch size needed with 25 servers in a cluster</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Consensus Latency</th>
<th class="tableblock halign-right valign-top">100/s</th>
<th class="tableblock halign-right valign-top">1 K/s</th>
<th class="tableblock halign-right valign-top">10 K/s</th>
<th class="tableblock halign-right valign-top">100 K/s</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3000 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">12 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">120 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="orange">1.2K txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="orange">12K txn</span></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">10 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">1 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">1 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">4 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">40 txn</span></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">30 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">1 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">2 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">12 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">120 txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">100 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">1 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">4 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">40 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">400 txn</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">300 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">2 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">12 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">120 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="orange">1.2K txn</span></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1000 ms</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">4 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="green">40 txn</span></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">400 txn</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><span class="orange">4K txn</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph">
<p>Latency is a constraint but using larger batch sizes can increase the throughput which can be achieved within reason.  As batches get larger they add to transmission time increasing latency further placing a practical constraints on the batch size.</p>
</div>
</div>
        </div>

        <menu>
            <a href="" id="btn_share" class="btn" title="Share">
                <span aria-hidden="true" data-icon="S"></span>
                <strong>Share</strong>
            </a>
            <a href="http://twitter.com/share?text=High%20throughput%20Consensus&url=https://vanilla-java.github.io/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" id="btn_comment" class="btn" target="_blank">
                <span aria-hidden="true" data-icon="C"></span> Comment on Twitter
            </a>
        </menu>


        <footer class="post-footer" role="contentinfo">

            <div class="vcard">
                <a href="https://vanilla-java.github.io/rss" id="btn_feed" class="btn" title="Feed" target="_blank">
                    <span aria-hidden="true" data-icon=")"></span>
                    <strong>Feed</strong>
                </a>

                <a href="https://vanilla-java.github.io/author/peter-lawrey/" class="photo">
                    <span style="background-image: url('https://avatars0.githubusercontent.com/u/1070321?v&#x3D;4');">
                        <img src="https://avatars0.githubusercontent.com/u/1070321?v&#x3D;4" alt="Peter Lawrey">
                    </span>
                </a>

                <div class="details">
                    <h4><a href="https://vanilla-java.github.io/author/peter-lawrey/" class="url n">Peter Lawrey</a></h4>
                    London<br>
                    <a href="http://vanillajava.blogspot.com/" class="js-remove-domain-schema">http://vanillajava.blogspot.com/</a>
                </div>
            </div>

            <div id="user_bio">
                <div class="inner">
                    Most answers for Java and JVM on StackOverflow.com (~13K), &quot;Vanilla Java&quot; blog with four million views, founder of the Performance JUG,  Java Champion
                </div>
            </div>

        </footer>




    <section class="post-comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
      var disqus_shortname = 'vanillajava'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>


    </article>

    <div id="share_modal">
        <div class="wrap">
            <div class="inner">
                <header>
                    Share
                    <a href="" class="close" title="Close">&times;</a>
                </header>

                <div class="roon-share-links">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                    <div id="fb-elems">
                        <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s); js.id = id;
                        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=463438580397968";
                        fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));</script>
                        <div class="fb-like" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false" data-font="arial"></div>
                    </div>

                    <div id="pinit-btn">
                        <a href="//pinterest.com/pin/create/button/?url=https://vanilla-java.github.io/&amp;description=High%20throughput%20Consensus-Vanilla%20Java " data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a>
                        <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>




        <a href="https://vanilla-java.github.io" id="blog_badge">
            <span style="background-image: url('https://raw.githubusercontent.com/Vanilla-Java/vanilla-java.github.io/master/images/French-Vanilla-Java.jpg');">Vanilla Java</span>
        </a>


    <script>

            function get_text(el) {
                ret = "";
                var length = el.childNodes.length;
                for(var i = 0; i < length; i++) {
                    var node = el.childNodes[i];
                    if(node.nodeType != 8) {
                        ret += node.nodeType != 1 ? node.nodeValue : get_text(node);
                    }
                }
                return ret;
            }
            function reading_time () {
                var post_content = document.getElementById('js-post-content');
                if (post_content) {
                    var words = get_text(post_content),
                        count = words.split(/\s+/).length,
                        read_time = Math.ceil((count / 150)),
                        read_time_node = document.createTextNode(read_time + ' min read');
                    document.getElementById('js-reading-time').appendChild(read_time_node);
                }
            }

        function no_schema_links () {
            var links = document.querySelectorAll('.js-remove-domain-schema');
            if (links) {
                for (i = 0; i < links.length; ++i) {
                    var link = links[i],
                        text = link.innerHTML,
                        no_schema = text.replace(/.*?:\/\//g, "");
                    link.innerHTML = no_schema;
                }
            }
        }

        window.onload = function () {
            no_schema_links();

            reading_time();
        }
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/prism.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        // hljs.initHighlightingOnLoad();
      </script>

        <script>
            $(function(){
                var share_modal = $("#share_modal"),
                    update_social_links = true;

                $("#btn_share").click(function(){
                    var that = $(this);
                    share_modal.fadeIn(200);
                    return false;
                });

                share_modal.click(function(e){
                    if (e.target.className == "wrap" || e.target.id == "share_modal") {
                        share_modal.fadeOut(200);
                    }
                    return false;
                });

                share_modal.find("div.inner > header > a.close").click(function(){
                    share_modal.fadeOut(200);
                    return false;
                });
            });
        </script>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-81039510-1', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
